{
  "specialist": "npc",
  "version": "1.0",
  "systemPrompt": "Create unique NPC. Check avoid list. Match loc theme. JSON only.",
  "outputSchema": {
    "npc": {
      "type": "object",
      "required": true,
      "properties": {
        "name": "string",
        "occupation": "string",
        "appearance": "string",
        "personality": "string",
        "backstory": "string"
      }
    },
    "dialogue": {
      "type": "object",
      "required": true,
      "properties": {
        "mood": {
          "type": "string",
          "enum": ["friendly", "neutral", "suspicious", "hostile", "fearful", "excited"]
        },
        "text": {
          "type": "string",
          "maxLength": 200,
          "description": "Initial dialogue"
        },
        "questHook": {
          "type": "string",
          "optional": true,
          "description": "Optional quest hint"
        }
      }
    }
  },
  "constraints": [
    "unique-name",
    "match-location",
    "avoid-duplicates",
    "appropriate-mood"
  },
  "continuityRules": [
    "If NPC exists, retrieve from memory",
    "Update relationship based on last interaction",
    "Reference previous meetings if applicable",
    "Remember promises made"
  ],
  "tokenBudget": {
    "instructions": 35,
    "response": 100,
    "availableForState": 3911
  }
}
